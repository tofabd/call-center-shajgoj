[program:laravel-reverb-production]
command=php /var/www/call-center-shajgoj/backend/artisan reverb:start --host=0.0.0.0 --port=8080 --env=production
directory=/var/www/call-center-shajgoj/backend
user=apache
numprocs=1
redirect_stderr=true
stdout_logfile=/var/log/supervisor/laravel-reverb-production.log
stderr_logfile=/var/log/supervisor/laravel-reverb-production-error.log
autostart=true
autorestart=true
startsecs=10
startretries=3
priority=20
stopwaitsecs=30
killasgroup=true
stopasgroup=true

; Production Environment Variables
environment=APP_ENV="production",BROADCAST_CONNECTION="reverb"

; Resource Limits for Production
; Restart if memory usage exceeds 512MB
;memory_limit_mb=512
;restart_on_memory_exceed=true

; Process Monitoring
exitcodes=0,2
autorestart=unexpected

; Logging Configuration
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10
stderr_logfile_maxbytes=50MB
stderr_logfile_backups=10
stdout_capture_maxbytes=1MB
stderr_capture_maxbytes=1MB

; Additional Production Settings
stopsignal=QUIT